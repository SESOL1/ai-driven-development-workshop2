# 工場設備監視システム - 非機能要件定義書

## 1. 可用性

### 1.1 システム稼働時間
**要件**: システムは24時間365日稼働する必要がある

**詳細要件**:
- **目標稼働率**: 99.9%以上（年間ダウンタイム8.76時間以下）
- **連続稼働**: 休日・正月を含む年中無休での稼働
- **メンテナンス時間**: 計画停止は事前通知の上、最小限に抑制

**根拠**: 
- ヒアリング内容「止まらないようにしてほしい」「休日も正月もそうですけどね」
- 工場設備は24時間稼働するため、監視システムも同様の可用性が必要

### 1.2 障害復旧
**要件**: システム障害時の迅速な復旧体制

**詳細要件**:
- **障害検知時間**: 5分以内
- **復旧目標時間（RTO）**: 30分以内
- **復旧ポイント目標（RPO）**: 15分以内
- **自動復旧機能**: 可能な限り自動復旧を実装

### 1.3 冗長化
**要件**: 単一障害点の排除

**詳細要件**:
- **データベース**: 自動フェイルオーバー機能付きの冗長構成
- **アプリケーション**: 複数インスタンスでの負荷分散
- **ネットワーク**: 複数経路での通信確保

## 2. 性能・拡張性

### 2.1 同時利用者数
**要件**: 同時に10人程度のユーザーがシステムを利用可能

**詳細要件**:
- **同時接続ユーザー数**: 10人（通常時）
- **ピーク時対応**: 20人（異常発生時等）
- **レスポンス時間**: 通常操作で3秒以内、複雑な分析処理で30秒以内

**根拠**: 
- ヒアリング内容「同時にそうですね。10人くらい捌ければいいのかなと思う」

### 2.2 データ処理性能
**要件**: リアルタイムでのデータ処理

**詳細要件**:
- **センサーデータ収集**: 1秒間隔でのデータ収集
- **異常検知処理**: データ受信から5秒以内での異常判定
- **アラート通知**: 異常検知から30秒以内での通知配信
- **データ保存**: 収集データの100%保存（データ欠損なし）

### 2.3 拡張性
**要件**: 将来的な機能追加に対応可能な設計

**詳細要件**:
- **水平スケーリング**: 負荷増加時のサーバー追加が容易
- **機能拡張**: 新機能追加時の既存機能への影響最小化
- **API設計**: 拡張性を考慮したRESTful API設計
- **モジュール設計**: 疎結合なモジュール構成

**根拠**: 
- ヒアリング内容「後から機能を追加するかもしれないので、ええ、そこの対応ができればいい」

### 2.4 ストレージ容量
**要件**: データ蓄積に対応するストレージ設計

**詳細要件**:
- **初期容量**: 1TB以上
- **拡張性**: 容量不足時の自動拡張機能
- **データ保持期間**: リアルタイムデータ1年間、分析データ5年間
- **アーカイブ**: 古いデータの自動アーカイブ機能

## 3. 運用・保守性

### 3.1 データバックアップ
**要件**: 重要データの確実なバックアップ体制

**詳細要件**:
- **バックアップ頻度**: 
  - 課金情報・予約情報: リアルタイム（継続的バックアップ）
  - 設備データ: 1時間間隔
  - システム設定: 24時間間隔
- **バックアップ保存場所**: 複数リージョンでの分散保存
- **バックアップ世代管理**: 30日間の世代管理

**根拠**: 
- ヒアリング内容「データのバックアップとかもちろんした方がいい」
- 「ユーザーさんの課金の情報とか、予約の情報っていうのは...ある程度はこちらでも持っておきたい」

### 3.2 データ復旧
**要件**: 24時間365日の迅速なデータ復旧体制

**詳細要件**:
- **復旧時間**: 24時間以内での全データ復旧
- **部分復旧**: 重要データは1時間以内での復旧
- **復旧手順**: 自動化された復旧スクリプトの整備
- **復旧テスト**: 月1回の復旧テスト実施

**根拠**: 
- ヒアリング内容「24時間365日すぐでも戻せるようにしてほしい」
- 「いつお客さんいらっしゃってるかわかりませんからね」

### 3.3 監視・アラート
**要件**: システムの健全性監視

**詳細要件**:
- **リソース監視**: CPU、メモリ、ディスク使用率の監視
- **アプリケーション監視**: レスポンス時間、エラー率の監視
- **インフラ監視**: ネットワーク、データベースの監視
- **通知体制**: 障害検知時の自動通知機能

### 3.4 ログ管理
**要件**: 運用・保守に必要なログの記録と管理

**詳細要件**:
- **アクセスログ**: 全ユーザーアクセスの記録
- **エラーログ**: システムエラーの詳細記録
- **操作ログ**: 重要操作の監査ログ記録
- **ログ保存期間**: 1年間の保存

### 3.5 システム更新
**要件**: 無停止でのシステム更新

**詳細要件**:
- **ローリングアップデート**: 段階的なシステム更新
- **ロールバック機能**: 問題発生時の迅速な戻し機能
- **テスト環境**: 本番同等のテスト環境での事前検証

## 4. 移行性

### 4.1 データ移行
**要件**: 現行システムが存在しないため、初期データ投入に対応

**詳細要件**:
- **設備マスター**: CSVファイルからの一括投入機能
- **データ検証**: 投入データの整合性チェック機能
- **移行ツール**: データ移行専用ツールの提供
- **移行手順書**: 詳細な移行手順書の作成

**根拠**: 
- ヒアリング内容「現行のシステムはありません。新規に全部作ります」

### 4.2 システム移行
**要件**: 将来的なシステム更改に対応

**詳細要件**:
- **データエクスポート**: 標準形式でのデータエクスポート機能
- **API仕様**: 外部システムとの連携仕様の文書化
- **設定情報**: システム設定のエクスポート・インポート機能

### 4.3 プラットフォーム移行
**要件**: 他のクラウドプラットフォームへの移行可能性

**詳細要件**:
- **ベンダーロックイン回避**: 標準技術の採用
- **コンテナ化**: Docker等を使用したポータブルな構成
- **構成管理**: Infrastructure as Codeでの環境構築

## 5. セキュリティ

### 5.1 個人情報保護
**要件**: 個人情報に関する厳格なセキュリティ対策

**詳細要件**:
- **データ暗号化**: 
  - 保存データ: AES-256による暗号化
  - 通信データ: TLS 1.3による暗号化
- **アクセス制御**: ロールベースアクセス制御（RBAC）
- **データマスキング**: 非本番環境での個人情報マスキング
- **監査ログ**: 個人情報アクセスの全記録

**根拠**: 
- ヒアリング内容「個人情報に近いところを管理することになると思いますから、その部分に関してはすごく厳密なものが必要」

### 5.2 認証・認可
**要件**: 強固な認証・認可機能

**詳細要件**:
- **多要素認証**: 重要操作時の二要素認証
- **パスワードポリシー**: 強力なパスワード要求
- **セッション管理**: 適切なセッション管理とタイムアウト
- **権限管理**: 最小権限の原則に基づく権限設定

### 5.3 システム保護
**要件**: 外部からの攻撃に対する保護

**詳細要件**:
- **ファイアウォール**: ネットワークレベルでの保護
- **侵入検知**: 不正アクセスの検知と通知
- **脆弱性管理**: 定期的な脆弱性スキャンと対策
- **セキュリティパッチ**: 迅速なセキュリティパッチの適用

### 5.4 データ保護
**要件**: データの漏洩・改ざん防止

**詳細要件**:
- **データ分類**: データの重要度に応じた分類と保護
- **データ損失防止**: DLP（Data Loss Prevention）機能
- **バックアップ暗号化**: バックアップデータの暗号化
- **アクセス監視**: データアクセスの継続的監視

## 6. 環境・サステナビリティ

### 6.1 環境配慮
**要件**: 環境に配慮したシステム運用

**詳細要件**:
- **再生可能エネルギー**: 太陽光発電等を利用可能なデータセンターの選択
- **電力効率**: 高効率なサーバー・ストレージの選択
- **カーボンニュートラル**: CO2排出量の最小化
- **リソース最適化**: 不要なリソースの自動停止機能

**根拠**: 
- ヒアリング内容「太陽光発なんかが使える環境があると、いいかなと思います」

### 6.2 モバイル対応
**要件**: スマートフォンでの利用を考慮した設計

**詳細要件**:
- **レスポンシブデザイン**: 画面サイズに応じた表示最適化
- **通信量最適化**: モバイル通信での利用を考慮したデータ通信量の最小化
- **バッテリー消費**: バッテリー消費を抑制した設計
- **オフライン対応**: 一部機能のオフライン利用

**根拠**: 
- ヒアリング内容「ほとんどスマホの中のアプリケーションだから」

### 6.3 リソース効率
**要件**: ITリソースの効率的利用

**詳細要件**:
- **自動スケーリング**: 負荷に応じた自動的なリソース調整
- **使用量監視**: リソース使用量の継続的な監視と最適化
- **ライフサイクル管理**: データとリソースのライフサイクル管理
- **コスト最適化**: 不要なコストの削減

### 6.4 長期利用
**要件**: 持続可能な長期利用

**詳細要件**:
- **技術陳腐化対策**: 定期的な技術アップデート計画
- **互換性維持**: 下位互換性の維持
- **ドキュメント管理**: 適切なドキュメント管理とメンテナンス
- **知識移転**: 運用知識の文書化と移転

## 7. 非機能要件の優先度

### 7.1 最高優先度
- システム稼働時間（可用性）
- データバックアップ・復旧（運用・保守性）
- 個人情報保護（セキュリティ）

### 7.2 高優先度
- 同時利用者数対応（性能・拡張性）
- 機能拡張性（拡張性）
- システム保護（セキュリティ）

### 7.3 中優先度
- 新規システム構築対応（移行性）
- 環境配慮（サステナビリティ）
- モバイル対応（環境・サステナビリティ）

## 8. 測定・検証方法

### 8.1 可用性の測定
- **稼働率監視**: システム監視ツールによる24時間監視
- **ダウンタイム記録**: 全ての停止時間の記録と分析
- **復旧時間測定**: 障害からの復旧時間の測定

### 8.2 性能の測定
- **レスポンス時間測定**: 各機能のレスポンス時間計測
- **同時接続テスト**: 負荷テストによる性能確認
- **スループット測定**: データ処理能力の測定

### 8.3 セキュリティの検証
- **ペネトレーションテスト**: 第三者による侵入テスト
- **脆弱性スキャン**: 定期的な脆弱性検査
- **アクセスログ監査**: アクセスログの定期的な監査

---

**文書作成日**: 2024年12月19日  
**作成者**: AI-Driven Development Team  
**承認者**: プロジェクトマネージャー  
**版数**: 1.0